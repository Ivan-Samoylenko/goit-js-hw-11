{"version":3,"sources":["js/fetch.js","index.js"],"names":["URL","KEY","IMAGE_TYPE","ORIENTATION","SAFESEARCH","PER_PAGE","page","path","fetchImages","querry","fetchMoreImages","response","fetch","json","currentSearch","totalImages","refs","searchForm","document","querySelector","gallery","loadMoreBtnPlace","loadMoreBtn","createElement","onQuerySubmit","event","preventDefault","resetImages","target","elements","searchQuery","value","trim","total","hits","renderImages","reset","append","noMoreImages","onLoadMore","remove","createCardMarkup","comments","views","largeImageURL","webformatURL","likes","downloads","tags","createOnePageMurkup","cards","reduce","acc","card","markup","insertAdjacentHTML","innerHTML","scrollBottom","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","setAttribute","classList","add","textContent","addEventListener"],"mappings":";;;AAoBC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,YAAA,EAAA,QAAA,gBAAA,EAAA,QAAA,SAAA,QAAA,UAAA,EApBD,MAAMA,EAAM,2BACNC,EAAM,qCACNC,EAAa,QACbC,EAAc,aACdC,EAAa,OACbC,EAAW,GAehB,QAAA,SAfgB,GAEjB,IAAIC,EAAO,EAaV,QAAA,KAAA,EAXD,MAAMC,KAAUP,SAAWC,wEAE3B,eAAeO,EAAYC,GAElBC,OADPJ,QAAAA,KAAAA,EAAO,EACAI,EAAgBD,GAGzB,eAAeC,EAAgBD,GACvBE,MAAAA,QAAiBC,SAASL,OAAUE,UAAeH,KAElD,OADPA,QAAAA,KAAAA,GAAQ,QACKK,EAASE;;ACiGE,aAnH1B,QAAA,oBAKA,IAAA,EAAA,QAAA,iBAGA,IAAIC,EAAgB,KAChBC,EAAc,KAGlB,MAAMC,EAAO,CACXC,WAAYC,SAASC,cAAc,gBACnCC,QAASF,SAASC,cAAc,YAChCE,iBAAkBH,SAASC,cAAc,2BACzCG,YAAaJ,SAASK,cAAc,WAatC,eAAeC,EAAcC,GAMvBX,GALJW,EAAMC,iBAENC,IAEAb,EAAgBW,EAAMG,OAAOC,SAASC,YAAYC,MAAMC,OACrC,CACX,MAAA,MAAEC,EAAF,KAASC,SAAe,EAAYpB,EAAAA,aAAAA,GAE1CqB,EAAaD,GAEbT,EAAMG,OAAOQ,QAEGH,EAAQ5B,EAAxB,SACcC,EAAd,KACEU,EAAKK,iBAAiBgB,OAAOrB,EAAKM,cAElCgB,IACAxB,EAAgB,OAKtB,eAAeyB,IACP,MAAA,MAAEN,EAAF,KAASC,SAAe,EAAgBpB,EAAAA,iBAAAA,GAE9CqB,EAAaD,GAEGD,EAAQ5B,EAAxB,SACcC,EAAd,OACEU,EAAKM,YAAYkB,SACjBF,IACAxB,EAAgB,MAKpB,SAAS2B,GAAiB,SACxBC,EADwB,MAExBC,EAFwB,cAGxBC,EAHwB,aAIxBC,EAJwB,MAKxBC,EALwB,UAMxBC,EANwB,KAOxBC,IAEQ,uCAAgCJ,sEAEhBC,WAAsBG,sIAEIF,4DACAH,+DACGD,gEACCK,kEAMxD,SAASE,EAAoBC,GACpBA,OAAAA,EAAMC,OAAO,CAACC,EAAKC,IACjBD,EAAMX,EAAiBY,GAC7B,IAGL,SAASlB,EAAae,GACdI,MAAAA,EAASL,EAAoBC,GACnClC,EAAKI,QAAQmC,mBAAmB,YAAaD,GAG/C,SAAS3B,IACPX,EAAKI,QAAQoC,UAAY,GAG3B,SAASC,IACD,MAAEC,OAAQC,GAAezC,SAC5BC,cAAc,YACdyC,kBAAkBC,wBAErBC,OAAOC,SAAS,CACdC,IAAkB,EAAbL,EACLM,SAAU,WAKd,SAAS3B,KA/FTtB,EAAKM,YAAY4C,aAAa,OAAQ,UACtClD,EAAKM,YAAY6C,UAAUC,IAAI,aAC/BpD,EAAKM,YAAY+C,YAAc,YAG/BrD,EAAKM,YAAYgD,iBAAiB,QAAS/B,GAC3CvB,EAAKC,WAAWqD,iBAAiB,SAAU9C","file":"src.5da158f9.js","sourceRoot":"../src","sourcesContent":["const URL = 'https://pixabay.com/api/';\nconst KEY = '29632331-970c63df483138173fd88b904';\nconst IMAGE_TYPE = 'photo';\nconst ORIENTATION = 'horizontal';\nconst SAFESEARCH = 'true';\nconst PER_PAGE = 12;\n\nlet page = 1;\n\nconst path = `${URL}?key=${KEY}&image_type=${IMAGE_TYPE}&orientation=${ORIENTATION}&safesearch=${SAFESEARCH}&per_page=${PER_PAGE}`;\n\nasync function fetchImages(querry) {\n  page = 1;\n  return fetchMoreImages(querry);\n}\n\nasync function fetchMoreImages(querry) {\n  const response = await fetch(`${path}&q=${querry}&page=${page}`);\n  page += 1;\n  return await response.json();\n}\n\nexport { fetchImages, fetchMoreImages, page, PER_PAGE };\n","// imports\nimport './css/styles.css';\n// import axios from 'axios';\n// import Notiflix from 'notiflix';\n// import SimpleLightbox from 'simplelightbox';\n// import 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchImages, fetchMoreImages, page, PER_PAGE } from './js/fetch.js';\n\n// variables\nlet currentSearch = null;\nlet totalImages = null;\n\n// references\nconst refs = {\n  searchForm: document.querySelector('#search-form'),\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtnPlace: document.querySelector('.js-load-more-btn-place'),\n  loadMoreBtn: document.createElement('button'),\n};\n\n// Load more button\nrefs.loadMoreBtn.setAttribute('type', 'button');\nrefs.loadMoreBtn.classList.add('load-more');\nrefs.loadMoreBtn.textContent = 'Load more';\n\n// event listeners\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\nrefs.searchForm.addEventListener('submit', onQuerySubmit);\n\n// event functions\nasync function onQuerySubmit(event) {\n  event.preventDefault();\n\n  resetImages();\n\n  currentSearch = event.target.elements.searchQuery.value.trim();\n  if (currentSearch) {\n    const { total, hits } = await fetchImages(currentSearch);\n\n    renderImages(hits);\n\n    event.target.reset();\n\n    const maxPage = total / PER_PAGE;\n    if (maxPage > page) {\n      refs.loadMoreBtnPlace.append(refs.loadMoreBtn);\n    } else {\n      noMoreImages();\n      currentSearch = null;\n    }\n  }\n}\n\nasync function onLoadMore() {\n  const { total, hits } = await fetchMoreImages(currentSearch);\n\n  renderImages(hits);\n\n  const maxPage = total / PER_PAGE;\n  if (maxPage < page) {\n    refs.loadMoreBtn.remove();\n    noMoreImages();\n    currentSearch = null;\n  }\n}\n\n// functions helpers\nfunction createCardMarkup({\n  comments,\n  views,\n  largeImageURL,\n  webformatURL,\n  likes,\n  downloads,\n  tags,\n}) {\n  return `<a class=\"gallery-card\" href=\"${largeImageURL}\">\n            <div class=\"photo-card\">\n              <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"290\" height=\"217\" loading=\"lazy\" />\n              <div class=\"info\">\n                <p class=\"info-item\"><b>Likes</b> ${likes}</p>\n                <p class=\"info-item\"><b>Views</b> ${views}</p>\n                <p class=\"info-item\"><b>Comments</b> ${comments}</p>\n                <p class=\"info-item\"><b>Downloads</b> ${downloads}</p>\n              </div>\n            </div>\n          </a>`;\n}\n\nfunction createOnePageMurkup(cards) {\n  return cards.reduce((acc, card) => {\n    return acc + createCardMarkup(card);\n  }, '');\n}\n\nfunction renderImages(cards) {\n  const markup = createOnePageMurkup(cards);\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction resetImages() {\n  refs.gallery.innerHTML = '';\n}\n\nfunction scrollBottom() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\n// messages\nfunction noMoreImages() {}\n"]}